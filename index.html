<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro WYSIWYG Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --dark-bg: #1e1e2e;
            --dark-surface: #2d2d3f;
            --dark-border: #3d3d5c;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d3f 100%);
            min-height: 100vh;
        }
        
        body.light-mode {
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
        }
        
        .editor-wrapper {
            background: var(--dark-surface);
            border-radius: 16px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            overflow: hidden;
            border: 1px solid var(--dark-border);
        }
        
        .light-mode .editor-wrapper {
            background: white;
            border-color: #e2e8f0;
            box-shadow: 0 25px 60px rgba(0,0,0,0.1);
        }
        
        .toolbar {
            background: linear-gradient(180deg, #2d2d3f 0%, #252536 100%);
            border-bottom: 1px solid var(--dark-border);
            padding: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            align-items: center;
        }
        
        .light-mode .toolbar {
            background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
            border-color: #e2e8f0;
        }
        
        .toolbar-group {
            display: flex;
            gap: 2px;
            padding: 0 8px;
            border-right: 1px solid var(--dark-border);
        }
        
        .light-mode .toolbar-group {
            border-color: #e2e8f0;
        }
        
        .toolbar-group:last-child {
            border-right: none;
        }
        
        .toolbar-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #a0a0b0;
            background: transparent;
            border: none;
            font-size: 14px;
        }
        
        .toolbar-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            color: #6366f1;
            transform: translateY(-1px);
        }
        
        .toolbar-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
        
        .light-mode .toolbar-btn {
            color: #64748b;
        }
        
        .light-mode .toolbar-btn:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }
        
        .toolbar-select {
            background: var(--dark-bg);
            color: #a0a0b0;
            border: 1px solid var(--dark-border);
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .toolbar-select:hover {
            border-color: var(--primary);
        }
        
        .light-mode .toolbar-select {
            background: white;
            color: #475569;
            border-color: #e2e8f0;
        }
        
        .editor-content {
            min-height: 500px;
            padding: 24px;
            outline: none;
            color: #e0e0e0;
            font-size: 16px;
            line-height: 1.7;
            overflow-y: auto;
            max-height: 70vh;
        }
        
        .light-mode .editor-content {
            color: #1e293b;
        }
        
        .editor-content:empty::before {
            content: attr(data-placeholder);
            color: #6b7280;
            pointer-events: none;
        }
        
        .editor-content h1 { font-size: 2.5em; font-weight: 700; margin: 0.5em 0; color: #fff; }
        .editor-content h2 { font-size: 2em; font-weight: 600; margin: 0.5em 0; color: #fff; }
        .editor-content h3 { font-size: 1.5em; font-weight: 600; margin: 0.5em 0; color: #fff; }
        .editor-content h4 { font-size: 1.25em; font-weight: 600; margin: 0.5em 0; }
        
        .light-mode .editor-content h1,
        .light-mode .editor-content h2,
        .light-mode .editor-content h3 {
            color: #1e293b;
        }
        
        .editor-content ul, .editor-content ol {
            padding-left: 24px;
            margin: 0.5em 0;
        }
        
        .editor-content blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 16px;
            margin: 1em 0;
            color: #9ca3af;
            font-style: italic;
        }
        
        .editor-content pre {
            background: #1e1e2e;
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
        }
        
        .editor-content code {
            background: rgba(99, 102, 241, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
        }
        
        .editor-content a {
            color: #6366f1;
            text-decoration: underline;
        }
        
        .editor-content img {
            max-width: 100%;
            border-radius: 8px;
            margin: 1em 0;
        }
        
        .editor-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
        }
        
        .editor-content table td, .editor-content table th {
            border: 1px solid var(--dark-border);
            padding: 10px;
        }
        
        .editor-content table th {
            background: var(--dark-bg);
        }
        
        .light-mode .editor-content table td,
        .light-mode .editor-content table th {
            border-color: #e2e8f0;
        }
        
        .light-mode .editor-content table th {
            background: #f8fafc;
        }
        
        .status-bar {
            background: var(--dark-bg);
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #6b7280;
            border-top: 1px solid var(--dark-border);
        }
        
        .light-mode .status-bar {
            background: #f8fafc;
            border-color: #e2e8f0;
        }
        
        .color-picker-wrapper {
            position: relative;
        }
        
        .color-palette {
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            padding: 12px;
            display: none;
            grid-template-columns: repeat(8, 1fr);
            gap: 6px;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .color-palette.show {
            display: grid;
        }
        
        .color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }
        
        .color-swatch:hover {
            transform: scale(1.2);
            border-color: white;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 500px;
            transform: scale(0.9);
            transition: transform 0.3s;
            border: 1px solid var(--dark-border);
        }
        
        .modal-overlay.show .modal {
            transform: scale(1);
        }
        
        .modal h3 {
            color: white;
            margin-bottom: 16px;
            font-size: 1.25rem;
        }
        
        .modal-input {
            width: 100%;
            background: var(--dark-bg);
            border: 1px solid var(--dark-border);
            border-radius: 8px;
            padding: 12px;
            color: white;
            margin-bottom: 12px;
        }
        
        .modal-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .modal-btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .modal-btn-primary {
            background: var(--primary);
            color: white;
            border: none;
        }
        
        .modal-btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .modal-btn-secondary {
            background: transparent;
            color: #9ca3af;
            border: 1px solid var(--dark-border);
            margin-right: 8px;
        }
        
        .emoji-picker {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            padding: 12px;
            display: none;
            width: 320px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .emoji-picker.show {
            display: block;
        }
        
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
        }
        
        .emoji-item {
            font-size: 20px;
            padding: 6px;
            cursor: pointer;
            border-radius: 6px;
            text-align: center;
            transition: background 0.2s;
        }
        
        .emoji-item:hover {
            background: rgba(99, 102, 241, 0.2);
        }
        
        .fullscreen {
            position: fixed !important;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 9999;
            border-radius: 0 !important;
            margin: 0 !important;
        }
        
        .fullscreen .editor-content {
            max-height: calc(100vh - 150px);
        }
        
        .tooltip {
            position: absolute;
            background: #1e1e2e;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .tooltip.show {
            opacity: 1;
        }
        
        .drop-zone {
            border: 2px dashed var(--primary);
            background: rgba(99, 102, 241, 0.1);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 50;
        }
        
        .drop-zone.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .autosave-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .autosave-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .find-replace {
            background: var(--dark-bg);
            padding: 12px;
            display: none;
            gap: 8px;
            align-items: center;
            border-bottom: 1px solid var(--dark-border);
        }
        
        .find-replace.show {
            display: flex;
        }
        
        .find-input {
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            padding: 8px 12px;
            color: white;
            flex: 1;
        }
        
        .find-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .preview-panel {
            background: var(--dark-bg);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--dark-border);
            margin-top: 24px;
        }
        
        .preview-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-content {
            padding: 24px;
            color: #e0e0e0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .light-mode .preview-panel {
            background: white;
            border-color: #e2e8f0;
        }
        
        .light-mode .preview-content {
            color: #1e293b;
        }
        
        .tab-btn {
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            border: none;
            color: rgba(255,255,255,0.7);
            font-weight: 500;
        }
        
        .tab-btn.active {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .source-code {
            background: #1e1e2e;
            padding: 16px;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            color: #a0ffa0;
            white-space: pre-wrap;
            word-break: break-all;
            display: none;
        }
        
        .source-code.show {
            display: block;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="tooltip" class="tooltip"></div>
    
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-3 flex items-center justify-center gap-4">
                <i class="fas fa-feather-alt text-indigo-400"></i>
                Pro WYSIWYG Editor
            </h1>
            <p class="text-lg text-gray-400">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏–π</p>
        </header>
        
        <!-- Editor Container -->
        <div class="editor-wrapper" id="editorWrapper">
            <!-- Toolbar -->
            <div class="toolbar">
                <!-- History -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="undo" data-tooltip="–û—Ç–º–µ–Ω–∏—Ç—å (Ctrl+Z)">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button class="toolbar-btn" data-command="redo" data-tooltip="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å (Ctrl+Y)">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
                
                <!-- Block Format -->
                <div class="toolbar-group">
                    <select class="toolbar-select" id="formatBlock">
                        <option value="p">–ü–∞—Ä–∞–≥—Ä–∞—Ñ</option>
                        <option value="h1">–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1</option>
                        <option value="h2">–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2</option>
                        <option value="h3">–ó–∞–≥–æ–ª–æ–≤–æ–∫ 3</option>
                        <option value="h4">–ó–∞–≥–æ–ª–æ–≤–æ–∫ 4</option>
                        <option value="pre">–ö–æ–¥</option>
                        <option value="blockquote">–¶–∏—Ç–∞—Ç–∞</option>
                    </select>
                    
                    <select class="toolbar-select" id="fontName">
                        <option value="Segoe UI">Segoe UI</option>
                        <option value="Arial">Arial</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Verdana">Verdana</option>
                    </select>
                    
                    <select class="toolbar-select" id="fontSize">
                        <option value="1">–ú–µ–ª–∫–∏–π</option>
                        <option value="2">–ú–∞–ª—ã–π</option>
                        <option value="3" selected>–û–±—ã—á–Ω—ã–π</option>
                        <option value="4">–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="5">–ë–æ–ª—å—à–æ–π</option>
                        <option value="6">–û–≥—Ä–æ–º–Ω—ã–π</option>
                        <option value="7">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π</option>
                    </select>
                </div>
                
                <!-- Text Formatting -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="bold" data-tooltip="–ñ–∏—Ä–Ω—ã–π (Ctrl+B)">
                        <i class="fas fa-bold"></i>
                    </button>
                    <button class="toolbar-btn" data-command="italic" data-tooltip="–ö—É—Ä—Å–∏–≤ (Ctrl+I)">
                        <i class="fas fa-italic"></i>
                    </button>
                    <button class="toolbar-btn" data-command="underline" data-tooltip="–ü–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π (Ctrl+U)">
                        <i class="fas fa-underline"></i>
                    </button>
                    <button class="toolbar-btn" data-command="strikeThrough" data-tooltip="–ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π">
                        <i class="fas fa-strikethrough"></i>
                    </button>
                    <button class="toolbar-btn" data-command="subscript" data-tooltip="–ü–æ–¥—Å—Ç—Ä–æ—á–Ω—ã–π">
                        <i class="fas fa-subscript"></i>
                    </button>
                    <button class="toolbar-btn" data-command="superscript" data-tooltip="–ù–∞–¥—Å—Ç—Ä–æ—á–Ω—ã–π">
                        <i class="fas fa-superscript"></i>
                    </button>
                </div>
                
                <!-- Colors -->
                <div class="toolbar-group">
                    <div class="color-picker-wrapper">
                        <button class="toolbar-btn" id="textColorBtn" data-tooltip="–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞">
                            <i class="fas fa-font" style="border-bottom: 3px solid #ff6b6b;"></i>
                        </button>
                        <div class="color-palette" id="textColorPalette"></div>
                    </div>
                    <div class="color-picker-wrapper">
                        <button class="toolbar-btn" id="bgColorBtn" data-tooltip="–¶–≤–µ—Ç —Ñ–æ–Ω–∞">
                            <i class="fas fa-fill-drip" style="color: #ffd93d;"></i>
                        </button>
                        <div class="color-palette" id="bgColorPalette"></div>
                    </div>
                </div>
                
                <!-- Alignment -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="justifyLeft" data-tooltip="–ü–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é">
                        <i class="fas fa-align-left"></i>
                    </button>
                    <button class="toolbar-btn" data-command="justifyCenter" data-tooltip="–ü–æ —Ü–µ–Ω—Ç—Ä—É">
                        <i class="fas fa-align-center"></i>
                    </button>
                    <button class="toolbar-btn" data-command="justifyRight" data-tooltip="–ü–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é">
                        <i class="fas fa-align-right"></i>
                    </button>
                    <button class="toolbar-btn" data-command="justifyFull" data-tooltip="–ü–æ —à–∏—Ä–∏–Ω–µ">
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
                
                <!-- Lists -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" data-command="insertUnorderedList" data-tooltip="–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫">
                        <i class="fas fa-list-ul"></i>
                    </button>
                    <button class="toolbar-btn" data-command="insertOrderedList" data-tooltip="–ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫">
                        <i class="fas fa-list-ol"></i>
                    </button>
                    <button class="toolbar-btn" data-command="indent" data-tooltip="–£–≤–µ–ª–∏—á–∏—Ç—å –æ—Ç—Å—Ç—É–ø">
                        <i class="fas fa-indent"></i>
                    </button>
                    <button class="toolbar-btn" data-command="outdent" data-tooltip="–£–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø">
                        <i class="fas fa-outdent"></i>
                    </button>
                </div>
                
                <!-- Insert -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" id="linkBtn" data-tooltip="–í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É (Ctrl+K)">
                        <i class="fas fa-link"></i>
                    </button>
                    <button class="toolbar-btn" id="imageBtn" data-tooltip="–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
                        <i class="fas fa-image"></i>
                    </button>
                    <button class="toolbar-btn" id="videoBtn" data-tooltip="–í—Å—Ç–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="toolbar-btn" id="tableBtn" data-tooltip="–í—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É">
                        <i class="fas fa-table"></i>
                    </button>
                    <button class="toolbar-btn" id="hrBtn" data-tooltip="–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
                
                <!-- Special -->
                <div class="toolbar-group">
                    <div class="color-picker-wrapper">
                        <button class="toolbar-btn" id="emojiBtn" data-tooltip="–≠–º–æ–¥–∑–∏">
                            <i class="fas fa-smile"></i>
                        </button>
                        <div class="emoji-picker" id="emojiPicker">
                            <div class="emoji-grid" id="emojiGrid"></div>
                        </div>
                    </div>
                    <button class="toolbar-btn" id="codeBtn" data-tooltip="–ë–ª–æ–∫ –∫–æ–¥–∞">
                        <i class="fas fa-code"></i>
                    </button>
                    <button class="toolbar-btn" data-command="removeFormat" data-tooltip="–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">
                        <i class="fas fa-eraser"></i>
                    </button>
                </div>
                
                <!-- Actions -->
                <div class="toolbar-group">
                    <button class="toolbar-btn" id="findBtn" data-tooltip="–ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞ (Ctrl+F)">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="toolbar-btn" id="printBtn" data-tooltip="–ü–µ—á–∞—Ç—å (Ctrl+P)">
                        <i class="fas fa-print"></i>
                    </button>
                    <button class="toolbar-btn" id="fullscreenBtn" data-tooltip="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω (F11)">
                        <i class="fas fa-expand"></i>
                    </button>
                    <button class="toolbar-btn" id="themeBtn" data-tooltip="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
            
            <!-- Find & Replace -->
            <div class="find-replace" id="findReplace">
                <input type="text" class="find-input" id="findInput" placeholder="–ù–∞–π—Ç–∏...">
                <input type="text" class="find-input" id="replaceInput" placeholder="–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞...">
                <button class="toolbar-btn" id="findNextBtn"><i class="fas fa-chevron-down"></i></button>
                <button class="toolbar-btn" id="replaceBtn">–ó–∞–º–µ–Ω–∏—Ç—å</button>
                <button class="toolbar-btn" id="replaceAllBtn">–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ</button>
                <button class="toolbar-btn" id="closeFindBtn"><i class="fas fa-times"></i></button>
            </div>
            
            <!-- Editor Content -->
            <div class="relative">
                <div class="drop-zone" id="dropZone">
                    <div class="text-center">
                        <i class="fas fa-cloud-upload-alt text-5xl text-indigo-400 mb-4"></i>
                        <p class="text-xl text-white">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</p>
                    </div>
                </div>
                <div 
                    class="editor-content" 
                    id="editor" 
                    contenteditable="true" 
                    data-placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–µ—á–∞—Ç–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ..."
                ></div>
            </div>
            
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="autosave-indicator">
                    <div class="autosave-dot"></div>
                    <span id="autosaveStatus">–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ</span>
                </div>
                <div class="flex gap-6">
                    <span>–°–ª–æ–≤: <strong id="wordCount">0</strong></span>
                    <span>–°–∏–º–≤–æ–ª–æ–≤: <strong id="charCount">0</strong></span>
                    <span>–ü–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤: <strong id="paraCount">0</strong></span>
                </div>
            </div>
        </div>
        
        <!-- Preview & Export Panel -->
        <div class="preview-panel">
            <div class="preview-header">
                <div class="flex gap-2">
                    <button class="tab-btn active" data-tab="preview">
                        <i class="fas fa-eye mr-2"></i>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                    </button>
                    <button class="tab-btn" data-tab="source">
                        <i class="fas fa-code mr-2"></i>HTML –∫–æ–¥
                    </button>
                </div>
                <div class="flex gap-2">
                    <button class="toolbar-btn" id="exportHtmlBtn" style="color: white;" data-tooltip="–≠–∫—Å–ø–æ—Ä—Ç HTML">
                        <i class="fas fa-file-code"></i>
                    </button>
                    <button class="toolbar-btn" id="exportTxtBtn" style="color: white;" data-tooltip="–≠–∫—Å–ø–æ—Ä—Ç TXT">
                        <i class="fas fa-file-alt"></i>
                    </button>
                    <button class="toolbar-btn" id="copyHtmlBtn" style="color: white;" data-tooltip="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTML">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
            <div class="preview-content" id="preview"></div>
            <pre class="source-code" id="sourceCode"></pre>
        </div>
    </div>
    
    <!-- Link Modal -->
    <div class="modal-overlay" id="linkModal">
        <div class="modal">
            <h3><i class="fas fa-link mr-2"></i>–í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</h3>
            <input type="text" class="modal-input" id="linkUrl" placeholder="URL (https://...)">
            <input type="text" class="modal-input" id="linkText" placeholder="–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏">
            <div class="flex justify-end mt-4">
                <button class="modal-btn modal-btn-secondary" id="linkCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn modal-btn-primary" id="linkInsertBtn">–í—Å—Ç–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- Image Modal -->
    <div class="modal-overlay" id="imageModal">
        <div class="modal">
            <h3><i class="fas fa-image mr-2"></i>–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h3>
            <input type="text" class="modal-input" id="imageUrl" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
            <input type="text" class="modal-input" id="imageAlt" placeholder="–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç">
            <div class="text-center my-4">
                <span class="text-gray-400">‚Äî –∏–ª–∏ ‚Äî</span>
            </div>
            <input type="file" id="imageFile" accept="image/*" class="modal-input">
            <div class="flex justify-end mt-4">
                <button class="modal-btn modal-btn-secondary" id="imageCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn modal-btn-primary" id="imageInsertBtn">–í—Å—Ç–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- Video Modal -->
    <div class="modal-overlay" id="videoModal">
        <div class="modal">
            <h3><i class="fas fa-video mr-2"></i>–í—Å—Ç–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ</h3>
            <input type="text" class="modal-input" id="videoUrl" placeholder="URL –≤–∏–¥–µ–æ (YouTube, Vimeo)">
            <div class="flex justify-end mt-4">
                <button class="modal-btn modal-btn-secondary" id="videoCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn modal-btn-primary" id="videoInsertBtn">–í—Å—Ç–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- Table Modal -->
    <div class="modal-overlay" id="tableModal">
        <div class="modal">
            <h3><i class="fas fa-table mr-2"></i>–í—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</h3>
            <div class="flex gap-4">
                <div class="flex-1">
                    <label class="text-gray-400 text-sm">–°—Ç—Ä–æ–∫</label>
                    <input type="number" class="modal-input" id="tableRows" value="3" min="1" max="20">
                </div>
                <div class="flex-1">
                    <label class="text-gray-400 text-sm">–°—Ç–æ–ª–±—Ü–æ–≤</label>
                    <input type="number" class="modal-input" id="tableCols" value="3" min="1" max="10">
                </div>
            </div>
            <div class="flex justify-end mt-4">
                <button class="modal-btn modal-btn-secondary" id="tableCancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn modal-btn-primary" id="tableInsertBtn">–í—Å—Ç–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <input type="file" id="fileInput" accept="image/*" class="hidden">
    
    <script>
        // Editor Setup
        const editor = document.getElementById('editor');
        const preview = document.getElementById('preview');
        const sourceCode = document.getElementById('sourceCode');
        const tooltip = document.getElementById('tooltip');
        
        // Colors
        const colors = [
            '#ff6b6b', '#ee5a24', '#ffd93d', '#6bcb77', '#4d96ff', '#6c5ce7', '#a55eea', '#fd79a8',
            '#ffffff', '#dfe6e9', '#b2bec3', '#636e72', '#2d3436', '#000000', '#00cec9', '#81ecec',
            '#fab1a0', '#ffeaa7', '#55efc4', '#74b9ff', '#a29bfe', '#fd79a8', '#e17055', '#d63031'
        ];
        
        // Emojis
        const emojis = [
            'üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÖ', 'üòÇ', 'ü§£', 'üòä', 'üòá', 'üôÇ', 'üôÉ', 'üòâ', 'üòå', 'üòç', 'ü•∞', 'üòò',
            'üòó', 'üòô', 'üòö', 'üòã', 'üòõ', 'üòú', 'ü§™', 'üòù', 'ü§ë', 'ü§ó', 'ü§≠', 'ü§´', 'ü§î', 'ü§ê', 'ü§®', 'üòê',
            'üòë', 'üò∂', 'üòè', 'üòí', 'üôÑ', 'üò¨', 'ü§•', 'üòå', 'üòî', 'üò™', 'ü§§', 'üò¥', 'üò∑', 'ü§í', 'ü§ï', 'ü§¢',
            'üëç', 'üëé', 'üëè', 'üôå', 'üëê', 'ü§≤', 'ü§ù', 'üôè', '‚úçÔ∏è', 'üí™', 'ü¶æ', 'ü¶ø', 'ü¶µ', 'ü¶∂', 'üëÇ', 'ü¶ª',
            '‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'üñ§', 'ü§ç', 'ü§é', 'üíî', '‚ù£Ô∏è', 'üíï', 'üíû', 'üíì', 'üíó', 'üíñ',
            '‚≠ê', 'üåü', '‚ú®', 'üí´', 'üî•', 'üí•', 'üéâ', 'üéä', 'üéà', 'üéÅ', 'üèÜ', 'ü•á', 'ü•à', 'ü•â', '‚ö°', 'üí°'
        ];
        
        // Initialize color palettes
        function initColorPalettes() {
            const textPalette = document.getElementById('textColorPalette');
            const bgPalette = document.getElementById('bgColorPalette');
            
            colors.forEach(color => {
                const swatch1 = document.createElement('div');
                swatch1.className = 'color-swatch';
                swatch1.style.background = color;
                swatch1.onclick = () => {
                    document.execCommand('foreColor', false, color);
                    textPalette.classList.remove('show');
                    updatePreview();
                };
                textPalette.appendChild(swatch1);
                
                const swatch2 = document.createElement('div');
                swatch2.className = 'color-swatch';
                swatch2.style.background = color;
                swatch2.onclick = () => {
                    document.execCommand('hiliteColor', false, color);
                    bgPalette.classList.remove('show');
                    updatePreview();
                };
                bgPalette.appendChild(swatch2);
            });
        }
        
        // Initialize emoji picker
        function initEmojiPicker() {
            const grid = document.getElementById('emojiGrid');
            emojis.forEach(emoji => {
                const item = document.createElement('div');
                item.className = 'emoji-item';
                item.textContent = emoji;
                item.onclick = () => {
                    document.execCommand('insertText', false, emoji);
                    document.getElementById('emojiPicker').classList.remove('show');
                    updatePreview();
                };
                grid.appendChild(item);
            });
        }
        
        // Toggle color palette
        document.getElementById('textColorBtn').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('textColorPalette').classList.toggle('show');
            document.getElementById('bgColorPalette').classList.remove('show');
            document.getElementById('emojiPicker').classList.remove('show');
        };
        
        document.getElementById('bgColorBtn').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('bgColorPalette').classList.toggle('show');
            document.getElementById('textColorPalette').classList.remove('show');
            document.getElementById('emojiPicker').classList.remove('show');
        };
        
        document.getElementById('emojiBtn').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('emojiPicker').classList.toggle('show');
            document.getElementById('textColorPalette').classList.remove('show');
            document.getElementById('bgColorPalette').classList.remove('show');
        };
        
        // Close popups on outside click
        document.addEventListener('click', () => {
            document.getElementById('textColorPalette').classList.remove('show');
            document.getElementById('bgColorPalette').classList.remove('show');
            document.getElementById('emojiPicker').classList.remove('show');
        });
        
        // Toolbar commands
        document.querySelectorAll('[data-command]').forEach(btn => {
            btn.onclick = () => {
                document.execCommand(btn.dataset.command, false, null);
                editor.focus();
                updateToolbarState();
                updatePreview();
            };
        });
        
        // Format selects
        document.getElementById('formatBlock').onchange = function() {
            document.execCommand('formatBlock', false, this.value);
            updatePreview();
        };
        
        document.getElementById('fontName').onchange = function() {
            document.execCommand('fontName', false, this.value);
            updatePreview();
        };
        
        document.getElementById('fontSize').onchange = function() {
            document.execCommand('fontSize', false, this.value);
            updatePreview();
        };
        
        // Horizontal rule
        document.getElementById('hrBtn').onclick = () => {
            document.execCommand('insertHorizontalRule', false, null);
            updatePreview();
        };
        
        // Code block
        document.getElementById('codeBtn').onclick = () => {
            const selection = window.getSelection();
            const text = selection.toString();
            document.execCommand('insertHTML', false, `<pre><code>${text || '–∫–æ–¥'}</code></pre>`);
            updatePreview();
        };
        
        // Link Modal
        const linkModal = document.getElementById('linkModal');
        let savedSelection = null;
        
        document.getElementById('linkBtn').onclick = () => {
            savedSelection = saveSelection();
            linkModal.classList.add('show');
        };
        
        document.getElementById('linkCancelBtn').onclick = () => {
            linkModal.classList.remove('show');
        };
        
        document.getElementById('linkInsertBtn').onclick = () => {
            const url = document.getElementById('linkUrl').value;
            const text = document.getElementById('linkText').value || url;
            
            if (url) {
                restoreSelection(savedSelection);
                document.execCommand('insertHTML', false, `<a href="${url}" target="_blank">${text}</a>`);
                linkModal.classList.remove('show');
                document.getElementById('linkUrl').value = '';
                document.getElementById('linkText').value = '';
                updatePreview();
            }
        };
        
        // Image Modal
        const imageModal = document.getElementById('imageModal');
        
        document.getElementById('imageBtn').onclick = () => {
            savedSelection = saveSelection();
            imageModal.classList.add('show');
        };
        
        document.getElementById('imageCancelBtn').onclick = () => {
            imageModal.classList.remove('show');
        };
        
        document.getElementById('imageInsertBtn').onclick = () => {
            const url = document.getElementById('imageUrl').value;
            const alt = document.getElementById('imageAlt').value || 'Image';
            const file = document.getElementById('imageFile').files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    restoreSelection(savedSelection);
                    document.execCommand('insertHTML', false, `<img src="${e.target.result}" alt="${alt}">`);
                    updatePreview();
                };
                reader.readAsDataURL(file);
            } else if (url) {
                restoreSelection(savedSelection);
                document.execCommand('insertHTML', false, `<img src="${url}" alt="${alt}">`);
                updatePreview();
            }
            
            imageModal.classList.remove('show');
            document.getElementById('imageUrl').value = '';
            document.getElementById('imageAlt').value = '';
            document.getElementById('imageFile').value = '';
        };
        
        // Video Modal
        const videoModal = document.getElementById('videoModal');
        
        document.getElementById('videoBtn').onclick = () => {
            savedSelection = saveSelection();
            videoModal.classList.add('show');
        };
        
        document.getElementById('videoCancelBtn').onclick = () => {
            videoModal.classList.remove('show');
        };
        
        document.getElementById('videoInsertBtn').onclick = () => {
            let url = document.getElementById('videoUrl').value;
            
            if (url) {
                // Convert YouTube URL to embed
                if (url.includes('youtube.com/watch')) {
                    const videoId = url.split('v=')[1]?.split('&')[0];
                    url = `https://www.youtube.com/embed/${videoId}`;
                } else if (url.includes('youtu.be/')) {
                    const videoId = url.split('youtu.be/')[1];
                    url = `https://www.youtube.com/embed/${videoId}`;
                }
                
                restoreSelection(savedSelection);
                document.execCommand('insertHTML', false, 
                    `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin:1em 0;">
                        <iframe src="${url}" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" allowfullscreen></iframe>
                    </div>`
                );
                videoModal.classList.remove('show');
                document.getElementById('videoUrl').value = '';
                updatePreview();
            }
        };
        
        // Table Modal
        const tableModal = document.getElementById('tableModal');
        
        document.getElementById('tableBtn').onclick = () => {
            savedSelection = saveSelection();
            tableModal.classList.add('show');
        };
        
        document.getElementById('tableCancelBtn').onclick = () => {
            tableModal.classList.remove('show');
        };
        
        document.getElementById('tableInsertBtn').onclick = () => {
            const rows = parseInt(document.getElementById('tableRows').value) || 3;
            const cols = parseInt(document.getElementById('tableCols').value) || 3;
            
            let tableHtml = '<table><thead><tr>';
            for (let c = 0; c < cols; c++) {
                tableHtml += '<th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>';
            }
            tableHtml += '</tr></thead><tbody>';
            for (let r = 0; r < rows - 1; r++) {
                tableHtml += '<tr>';
                for (let c = 0; c < cols; c++) {
                    tableHtml += '<td>–Ø—á–µ–π–∫–∞</td>';
                }
                tableHtml += '</tr>';
            }
            tableHtml += '</tbody></table>';
            
            restoreSelection(savedSelection);
            document.execCommand('insertHTML', false, tableHtml);
            tableModal.classList.remove('show');
            updatePreview();
        };
        
        // Selection helpers
        function saveSelection() {
            const sel = window.getSelection();
            if (sel.rangeCount > 0) {
                return sel.getRangeAt(0);
            }
            return null;
        }
        
        function restoreSelection(range) {
            if (range) {
                const sel = window.getSelection();
                sel.removeAllRanges();
                sel.addRange(range);
            }
        }
        
        // Drag & Drop
        const dropZone = document.getElementById('dropZone');
        
        editor.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('active');
        });
        
        editor.addEventListener('dragleave', () => {
            dropZone.classList.remove('active');
        });
        
        editor.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('active');
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (evt) => {
                    document.execCommand('insertHTML', false, `<img src="${evt.target.result}" alt="Dropped image">`);
                    updatePreview();
                };
                reader.readAsDataURL(files[0]);
            }
        });
        
        // Find & Replace
        document.getElementById('findBtn').onclick = () => {
            document.getElementById('findReplace').classList.toggle('show');
        };
        
        document.getElementById('closeFindBtn').onclick = () => {
            document.getElementById('findReplace').classList.remove('show');
        };
        
        document.getElementById('findNextBtn').onclick = () => {
            const text = document.getElementById('findInput').value;
            if (text) {
                window.find(text);
            }
        };
        
        document.getElementById('replaceBtn').onclick = () => {
            const findText = document.getElementById('findInput').value;
            const replaceText = document.getElementById('replaceInput').value;
            
            if (findText) {
                editor.innerHTML = editor.innerHTML.replace(findText, replaceText);
                updatePreview();
            }
        };
        
        document.getElementById('replaceAllBtn').onclick = () => {
            const findText = document.getElementById('findInput').value;
            const replaceText = document.getElementById('replaceInput').value;
            
            if (findText) {
                editor.innerHTML = editor.innerHTML.split(findText).join(replaceText);
                updatePreview();
            }
        };
        
        // Fullscreen
        document.getElementById('fullscreenBtn').onclick = () => {
            const wrapper = document.getElementById('editorWrapper');
            wrapper.classList.toggle('fullscreen');
            const icon = document.querySelector('#fullscreenBtn i');
            icon.className = wrapper.classList.contains('fullscreen') ? 'fas fa-compress' : 'fas fa-expand';
        };
        
        // Theme toggle
        document.getElementById('themeBtn').onclick = () => {
            document.body.classList.toggle('light-mode');
            const icon = document.querySelector('#themeBtn i');
            icon.className = document.body.classList.contains('light-mode') ? 'fas fa-sun' : 'fas fa-moon';
        };
        
        // Print
        document.getElementById('printBtn').onclick = () => {
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html><head><title>Print</title>
                <style>body{font-family:Arial,sans-serif;padding:40px;}</style>
                </head><body>${editor.innerHTML}</body></html>
            `);
            printWindow.document.close();
            printWindow.print();
        };
        
        // Update preview & stats
        function updatePreview() {
            preview.innerHTML = editor.innerHTML;
            sourceCode.textContent = editor.innerHTML;
            
            const text = editor.innerText;
            document.getElementById('wordCount').textContent = text.trim() ? text.trim().split(/\s+/).length : 0;
            document.getElementById('charCount').textContent = text.length;
            document.getElementById('paraCount').textContent = editor.querySelectorAll('p, h1, h2, h3, h4, h5, h6, li').length || (text.trim() ? 1 : 0);
            
            // Autosave
            localStorage.setItem('editorContent', editor.innerHTML);
            document.getElementById('autosaveStatus').textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ' + new Date().toLocaleTimeString();
        }
        
        // Update toolbar state
        function updateToolbarState() {
            document.querySelectorAll('[data-command]').forEach(btn => {
                const command = btn.dataset.command;
                if (document.queryCommandState(command)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        // Tooltips
        document.querySelectorAll('[data-tooltip]').forEach(el => {
            el.addEventListener('mouseenter', (e) => {
                tooltip.textContent = e.target.dataset.tooltip || e.target.closest('[data-tooltip]').dataset.tooltip;
                tooltip.classList.add('show');
                const rect = e.target.getBoundingClientRect();
                tooltip.style.left = rect.left + rect.width / 2 - tooltip.offsetWidth / 2 + 'px';
                tooltip.style.top = rect.bottom + 8 + 'px';
            });
            
            el.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
        });
        
        // Tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                if (btn.dataset.tab === 'preview') {
                    preview.style.display = 'block';
                    sourceCode.classList.remove('show');
                } else {
                    preview.style.display = 'none';
                    sourceCode.classList.add('show');
                }
            };
        });
        
        // Export functions
        document.getElementById('exportHtmlBtn').onclick = () => {
            const blob = new Blob([editor.innerHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'document.html';
            a.click();
        };
        
        document.getElementById('exportTxtBtn').onclick = () => {
            const blob = new Blob([editor.innerText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'document.txt';
            a.click();
        };
        
        document.getElementById('copyHtmlBtn').onclick = () => {
            navigator.clipboard.writeText(editor.innerHTML).then(() => {
                document.getElementById('autosaveStatus').textContent = 'HTML —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!';
            });
        };
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key.toLowerCase()) {
                    case 'b':
                        e.preventDefault();
                        document.execCommand('bold');
                        break;
                    case 'i':
                        e.preventDefault();
                        document.execCommand('italic');
                        break;
                    case 'u':
                        e.preventDefault();
                        document.execCommand('underline');
                        break;
                    case 'k':
                        e.preventDefault();
                        document.getElementById('linkBtn').click();
                        break;
                    case 'f':
                        e.preventDefault();
                        document.getElementById('findBtn').click();
                        break;
                    case 's':
                        e.preventDefault();
                        updatePreview();
                        document.getElementById('autosaveStatus').textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!';
                        break;
                }
            }
            
            if (e.key === 'F11') {
                e.preventDefault();
                document.getElementById('fullscreenBtn').click();
            }
            
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('show'));
                document.getElementById('editorWrapper').classList.remove('fullscreen');
            }
        });
        
        // Editor events
        editor.addEventListener('input', () => {
            updatePreview();
            updateToolbarState();
        });
        
        editor.addEventListener('mouseup', updateToolbarState);
        editor.addEventListener('keyup', updateToolbarState);
        
        // Initialize
        initColorPalettes();
        initEmojiPicker();
        
        // Load saved content
        const saved = localStorage.getItem('editorContent');
        if (saved) {
            editor.innerHTML = saved;
        } else {
            editor.innerHTML = `
                <h1>üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Pro WYSIWYG Editor!</h1>
                <p>–≠—Ç–æ <strong>–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</strong> —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å <em>–ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏–π</em>:</p>
                <ul>
                    <li>‚ú® <strong>–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</strong> ‚Äî –∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ, –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ</li>
                    <li>üé® <strong>–¶–≤–µ—Ç–∞</strong> ‚Äî –≤—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Ñ–æ–Ω–∞</li>
                    <li>üìù <strong>–ó–∞–≥–æ–ª–æ–≤–∫–∏</strong> ‚Äî –æ—Ç H1 –¥–æ H4</li>
                    <li>üìã <strong>–°–ø–∏—Å–∫–∏</strong> ‚Äî –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ</li>
                    <li>üñºÔ∏è <strong>–ú–µ–¥–∏–∞</strong> ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∏–¥–µ–æ</li>
                    <li>üîó <strong>–°—Å—ã–ª–∫–∏</strong> ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –≥–∏–ø–µ—Ä—Å—Å—ã–ª–æ–∫</li>
                    <li>üìä <strong>–¢–∞–±–ª–∏—Ü—ã</strong> ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü</li>
                    <li>üòÄ <strong>–≠–º–æ–¥–∑–∏</strong> ‚Äî –≤—Å—Ç–∞–≤–∫–∞ —ç–º–æ–¥–∑–∏</li>
                    <li>üîç <strong>–ü–æ–∏—Å–∫</strong> ‚Äî –ø–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞</li>
                    <li>üíæ <strong>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</strong> ‚Äî –≤–∞—à–∞ —Ä–∞–±–æ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
                    <li>üì§ <strong>–≠–∫—Å–ø–æ—Ä—Ç</strong> ‚Äî –≤ HTML –∏ TXT —Ñ–æ—Ä–º–∞—Ç—ã</li>
                    <li>üåô <strong>–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</strong> ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏</li>
                </ul>
                <blockquote>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —á—Ç–æ-—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–µ!</blockquote>
                <p>–ù–∞—á–Ω–∏—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! üöÄ</p>
            `;
        }
        
        updatePreview();
    </script>
</body>
</html>
